    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; About this assembly program.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; A module to accumulate sound values and to compute their average.
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Displays it on LEDs as in lab spec
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Interfaces with voldisp module
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Port definitions
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED_port, 80
  LOGFORMAT-CONSTANT LED_port, 80
INSTRUCTION-CONSTANT
   OPERAND1-LED_port
  OP1 VALUE-LED_port
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT LED_accumulator_port, 40
  LOGFORMAT-CONSTANT LED_accumulator_port, 40
INSTRUCTION-CONSTANT
   OPERAND1-LED_accumulator_port
  OP1 VALUE-LED_accumulator_port
   OPERAND2-40
  OP2 VALUE-40
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT DATA_IN_PORT, 00
  LOGFORMAT-CONSTANT DATA_IN_PORT, 00
INSTRUCTION-CONSTANT
   OPERAND1-DATA_IN_PORT
  OP1 VALUE-DATA_IN_PORT
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Special Register Usage
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;None
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Scratchpad memory locations
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Preserve registers s0-s3, led pattern
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT ISR_preserve_sB, 00
  LOGFORMAT-CONSTANT ISR_preserve_sB, 00
INSTRUCTION-CONSTANT
   OPERAND1-ISR_preserve_sB
  OP1 VALUE-ISR_preserve_sB
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT ISR_preserve_sC, 01
  LOGFORMAT-CONSTANT ISR_preserve_sC, 01
INSTRUCTION-CONSTANT
   OPERAND1-ISR_preserve_sC
  OP1 VALUE-ISR_preserve_sC
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT ISR_preserve_sD, 02
  LOGFORMAT-CONSTANT ISR_preserve_sD, 02
INSTRUCTION-CONSTANT
   OPERAND1-ISR_preserve_sD
  OP1 VALUE-ISR_preserve_sD
   OPERAND2-02
  OP2 VALUE-02
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT ISR_preserve_sE, 03
  LOGFORMAT-CONSTANT ISR_preserve_sE, 03
INSTRUCTION-CONSTANT
   OPERAND1-ISR_preserve_sE
  OP1 VALUE-ISR_preserve_sE
   OPERAND2-03
  OP2 VALUE-03
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT COUNTER_256, 05
  LOGFORMAT-CONSTANT COUNTER_256, 05
INSTRUCTION-CONSTANT
   OPERAND1-COUNTER_256
  OP1 VALUE-COUNTER_256
   OPERAND2-05
  OP2 VALUE-05
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SUM0, 06
  LOGFORMAT-CONSTANT SUM0, 06
INSTRUCTION-CONSTANT
   OPERAND1-SUM0
  OP1 VALUE-SUM0
   OPERAND2-06
  OP2 VALUE-06
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT SUM1, 07
  LOGFORMAT-CONSTANT SUM1, 07
INSTRUCTION-CONSTANT
   OPERAND1-SUM1
  OP1 VALUE-SUM1
   OPERAND2-07
  OP2 VALUE-07
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Constants
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Clock constants
    ADDRESS-000
      LABEL-
  FORMATTED-CONSTANT delay_1us_constant, 0B
  LOGFORMAT-CONSTANT delay_1us_constant, 0B
INSTRUCTION-CONSTANT
   OPERAND1-delay_1us_constant
  OP1 VALUE-delay_1us_constant
   OPERAND2-0B
  OP2 VALUE-0B
    COMMENT-
    ADDRESS-000
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Initialize System
    ADDRESS-000
      LABEL-cold_start
  FORMATTED-LOAD sA, 01
  LOGFORMAT-LOAD sA, 01
INSTRUCTION-LOAD
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-001
      LABEL-
  FORMATTED-LOAD sB, FF
  LOGFORMAT-LOAD sB, FF
INSTRUCTION-LOAD
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-
    ADDRESS-002
      LABEL-
  FORMATTED-LOAD sC, 00
  LOGFORMAT-LOAD sC, 00
INSTRUCTION-LOAD
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-003
      LABEL-
  FORMATTED-STORE sB, COUNTER_256
  LOGFORMAT-STORE sB, COUNTER_256[05]
INSTRUCTION-STORE
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-COUNTER_256
  OP2 VALUE-05
    COMMENT-;initialize to FF, so overflows and outputs 0 right away
    ADDRESS-004
      LABEL-
  FORMATTED-STORE sC, SUM0
  LOGFORMAT-STORE sC, SUM0[06]
INSTRUCTION-STORE
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-SUM0
  OP2 VALUE-06
    COMMENT-;initialize to 0
    ADDRESS-005
      LABEL-
  FORMATTED-STORE sC, SUM1
  LOGFORMAT-STORE sC, SUM1[07]
INSTRUCTION-STORE
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-SUM1
  OP2 VALUE-07
    COMMENT-
    ADDRESS-006
      LABEL-
  FORMATTED-OUTPUT sA, LED_port
  LOGFORMAT-OUTPUT sA, LED_port[80]
INSTRUCTION-OUTPUT
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-LED_port
  OP2 VALUE-80
    COMMENT-;turn on LED
    ADDRESS-007
      LABEL-
  FORMATTED-OUTPUT sC, LED_accumulator_port
  LOGFORMAT-OUTPUT sC, LED_accumulator_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-LED_accumulator_port
  OP2 VALUE-40
    COMMENT-;set accumulator display to 00
    ADDRESS-008
      LABEL-
  FORMATTED-ENABLE INTERRUPT
  LOGFORMAT-ENABLE INTERRUPT
INSTRUCTION-ENABLE
   OPERAND1-INTERRUPT
  OP1 VALUE-INTERRUPT
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-009
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Main Program
    ADDRESS-009
      LABEL-main_program
  FORMATTED-CALL delay_1s
  LOGFORMAT-CALL delay_1s[029]
INSTRUCTION-CALL
   OPERAND1-delay_1s
  OP1 VALUE-029
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-00A
      LABEL-
  FORMATTED-COMPARE sA, 01
  LOGFORMAT-COMPARE sA, 01
INSTRUCTION-COMPARE
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-00B
      LABEL-
  FORMATTED-JUMP NZ, add
  LOGFORMAT-JUMP NZ, add[00E]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-add
  OP2 VALUE-00E
    COMMENT-
    ADDRESS-00C
      LABEL-subtract
  FORMATTED-SUB sA, 01
  LOGFORMAT-SUB sA, 01
INSTRUCTION-SUB
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;sA == 01
    ADDRESS-00D
      LABEL-
  FORMATTED-JUMP set_led
  LOGFORMAT-JUMP set_led[00F]
INSTRUCTION-JUMP
   OPERAND1-set_led
  OP1 VALUE-00F
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-00E
      LABEL-add
  FORMATTED-ADD sA, 01
  LOGFORMAT-ADD sA, 01
INSTRUCTION-ADD
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;sA != 01
    ADDRESS-00F
      LABEL-set_led
  FORMATTED-OUTPUT sA, LED_port
  LOGFORMAT-OUTPUT sA, LED_port[80]
INSTRUCTION-OUTPUT
   OPERAND1-sA
  OP1 VALUE-sA
   OPERAND2-LED_port
  OP2 VALUE-80
    COMMENT-
    ADDRESS-010
      LABEL-
  FORMATTED-JUMP main_program
  LOGFORMAT-JUMP main_program[009]
INSTRUCTION-JUMP
   OPERAND1-main_program
  OP1 VALUE-009
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-011
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Routines for software delays, borrowed from in-class activity
    ADDRESS-011
      LABEL-delay_1us
  FORMATTED-LOAD s0, delay_1us_constant
  LOGFORMAT-LOAD s0, delay_1us_constant[0B]
INSTRUCTION-LOAD
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-delay_1us_constant
  OP2 VALUE-0B
    COMMENT-
    ADDRESS-012
      LABEL-wait_1us
  FORMATTED-SUB s0, 01
  LOGFORMAT-SUB s0, 01
INSTRUCTION-SUB
   OPERAND1-s0
  OP1 VALUE-s0
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-013
      LABEL-
  FORMATTED-JUMP NZ, wait_1us
  LOGFORMAT-JUMP NZ, wait_1us[012]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_1us
  OP2 VALUE-012
    COMMENT-
    ADDRESS-014
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Delay of 40us.
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Registers used s0, s1
    ADDRESS-015
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-015
      LABEL-delay_40us
  FORMATTED-LOAD s1, 28
  LOGFORMAT-LOAD s1, 28
INSTRUCTION-LOAD
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-28
  OP2 VALUE-28
    COMMENT-;40 x 1us = 40us
    ADDRESS-016
      LABEL-wait_40us
  FORMATTED-CALL delay_1us
  LOGFORMAT-CALL delay_1us[011]
INSTRUCTION-CALL
   OPERAND1-delay_1us
  OP1 VALUE-011
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-017
      LABEL-
  FORMATTED-SUB s1, 01
  LOGFORMAT-SUB s1, 01
INSTRUCTION-SUB
   OPERAND1-s1
  OP1 VALUE-s1
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-018
      LABEL-
  FORMATTED-JUMP NZ, wait_40us
  LOGFORMAT-JUMP NZ, wait_40us[016]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_40us
  OP2 VALUE-016
    COMMENT-
    ADDRESS-019
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-01A
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01A
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01A
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Delay of 1ms.
    ADDRESS-01A
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01A
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Registers used s0, s1, s2
    ADDRESS-01A
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01A
      LABEL-delay_1ms
  FORMATTED-LOAD s2, 19
  LOGFORMAT-LOAD s2, 19
INSTRUCTION-LOAD
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-19
  OP2 VALUE-19
    COMMENT-;25 x 40us = 1ms
    ADDRESS-01B
      LABEL-wait_1ms
  FORMATTED-CALL delay_40us
  LOGFORMAT-CALL delay_40us[015]
INSTRUCTION-CALL
   OPERAND1-delay_40us
  OP1 VALUE-015
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-01C
      LABEL-
  FORMATTED-SUB s2, 01
  LOGFORMAT-SUB s2, 01
INSTRUCTION-SUB
   OPERAND1-s2
  OP1 VALUE-s2
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-01D
      LABEL-
  FORMATTED-JUMP NZ, wait_1ms
  LOGFORMAT-JUMP NZ, wait_1ms[01B]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_1ms
  OP2 VALUE-01B
    COMMENT-
    ADDRESS-01E
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-01F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Delay of 20ms.
    ADDRESS-01F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Delay of 20ms used during initialisation.
    ADDRESS-01F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Registers used s0, s1, s2, s3
    ADDRESS-01F
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-01F
      LABEL-delay_20ms
  FORMATTED-LOAD s3, 14
  LOGFORMAT-LOAD s3, 14
INSTRUCTION-LOAD
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-14
  OP2 VALUE-14
    COMMENT-;20 x 1ms = 20ms
    ADDRESS-020
      LABEL-wait_20ms
  FORMATTED-CALL delay_1ms
  LOGFORMAT-CALL delay_1ms[01A]
INSTRUCTION-CALL
   OPERAND1-delay_1ms
  OP1 VALUE-01A
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-021
      LABEL-
  FORMATTED-SUB s3, 01
  LOGFORMAT-SUB s3, 01
INSTRUCTION-SUB
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-022
      LABEL-
  FORMATTED-JUMP NZ, wait_20ms
  LOGFORMAT-JUMP NZ, wait_20ms[020]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_20ms
  OP2 VALUE-020
    COMMENT-
    ADDRESS-023
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-024
      LABEL-delay_100ms
  FORMATTED-LOAD s3, 64
  LOGFORMAT-LOAD s3, 64
INSTRUCTION-LOAD
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-64
  OP2 VALUE-64
    COMMENT-;100 x 1ms = 20ms
    ADDRESS-025
      LABEL-wait_100ms
  FORMATTED-CALL delay_1ms
  LOGFORMAT-CALL delay_1ms[01A]
INSTRUCTION-CALL
   OPERAND1-delay_1ms
  OP1 VALUE-01A
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-026
      LABEL-
  FORMATTED-SUB s3, 01
  LOGFORMAT-SUB s3, 01
INSTRUCTION-SUB
   OPERAND1-s3
  OP1 VALUE-s3
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-027
      LABEL-
  FORMATTED-JUMP NZ, wait_100ms
  LOGFORMAT-JUMP NZ, wait_100ms[025]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_100ms
  OP2 VALUE-025
    COMMENT-
    ADDRESS-028
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-029
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-029
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Delay of approximately 1 second.
    ADDRESS-029
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-029
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-; Registers used s0, s1, s2, s3, s4
    ADDRESS-029
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;
    ADDRESS-029
      LABEL-delay_1s
  FORMATTED-LOAD s4, 32
  LOGFORMAT-LOAD s4, 32
INSTRUCTION-LOAD
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-32
  OP2 VALUE-32
    COMMENT-;50 x 20ms = 1000ms
    ADDRESS-02A
      LABEL-wait_1s
  FORMATTED-CALL delay_20ms
  LOGFORMAT-CALL delay_20ms[01F]
INSTRUCTION-CALL
   OPERAND1-delay_20ms
  OP1 VALUE-01F
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-02B
      LABEL-
  FORMATTED-SUB s4, 01
  LOGFORMAT-SUB s4, 01
INSTRUCTION-SUB
   OPERAND1-s4
  OP1 VALUE-s4
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-
    ADDRESS-02C
      LABEL-
  FORMATTED-JUMP NZ, wait_1s
  LOGFORMAT-JUMP NZ, wait_1s[02A]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-wait_1s
  OP2 VALUE-02A
    COMMENT-
    ADDRESS-02D
      LABEL-
  FORMATTED-RETURN
  LOGFORMAT-RETURN
INSTRUCTION-RETURN
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-02E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;ISR Routine
    ADDRESS-02E
      LABEL-ISR
  FORMATTED-STORE sB, ISR_preserve_sB
  LOGFORMAT-STORE sB, ISR_preserve_sB[00]
INSTRUCTION-STORE
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-ISR_preserve_sB
  OP2 VALUE-00
    COMMENT-;Preserve registers
    ADDRESS-02F
      LABEL-
  FORMATTED-STORE sC, ISR_preserve_sC
  LOGFORMAT-STORE sC, ISR_preserve_sC[01]
INSTRUCTION-STORE
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-ISR_preserve_sC
  OP2 VALUE-01
    COMMENT-
    ADDRESS-030
      LABEL-
  FORMATTED-STORE sD, ISR_preserve_sD
  LOGFORMAT-STORE sD, ISR_preserve_sD[02]
INSTRUCTION-STORE
   OPERAND1-sD
  OP1 VALUE-sD
   OPERAND2-ISR_preserve_sD
  OP2 VALUE-02
    COMMENT-
    ADDRESS-031
      LABEL-
  FORMATTED-STORE sE, ISR_preserve_sE
  LOGFORMAT-STORE sE, ISR_preserve_sE[03]
INSTRUCTION-STORE
   OPERAND1-sE
  OP1 VALUE-sE
   OPERAND2-ISR_preserve_sE
  OP2 VALUE-03
    COMMENT-
    ADDRESS-032
      LABEL-
  FORMATTED-FETCH sB, COUNTER_256
  LOGFORMAT-FETCH sB, COUNTER_256[05]
INSTRUCTION-FETCH
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-COUNTER_256
  OP2 VALUE-05
    COMMENT-;Get counter values
    ADDRESS-033
      LABEL-
  FORMATTED-FETCH sC, SUM0
  LOGFORMAT-FETCH sC, SUM0[06]
INSTRUCTION-FETCH
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-SUM0
  OP2 VALUE-06
    COMMENT-
    ADDRESS-034
      LABEL-
  FORMATTED-FETCH sD, SUM1
  LOGFORMAT-FETCH sD, SUM1[07]
INSTRUCTION-FETCH
   OPERAND1-sD
  OP1 VALUE-sD
   OPERAND2-SUM1
  OP2 VALUE-07
    COMMENT-
    ADDRESS-035
      LABEL-
  FORMATTED-ADD sB, 01
  LOGFORMAT-ADD sB, 01
INSTRUCTION-ADD
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;increment counter
    ADDRESS-036
      LABEL-
  FORMATTED-JUMP NC, accumulator_add
  LOGFORMAT-JUMP NC, accumulator_add[03F]
INSTRUCTION-JUMP
   OPERAND1-NC
  OP1 VALUE-NC
   OPERAND2-accumulator_add
  OP2 VALUE-03F
    COMMENT-;when overflow, is 256
    ADDRESS-037
      LABEL-
  FORMATTED-LOAD sE, FF
  LOGFORMAT-LOAD sE, FF
INSTRUCTION-LOAD
   OPERAND1-sE
  OP1 VALUE-sE
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-;start with all ones, all LEDs from left illuminated
    ADDRESS-038
      LABEL-shift_left
  FORMATTED-SL0 sD
  LOGFORMAT-SL0 sD
INSTRUCTION-SL0
   OPERAND1-sD
  OP1 VALUE-sD
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Shift into carry
    ADDRESS-039
      LABEL-
  FORMATTED-JUMP C, output_sum
  LOGFORMAT-JUMP C, output_sum[03C]
INSTRUCTION-JUMP
   OPERAND1-C
  OP1 VALUE-C
   OPERAND2-output_sum
  OP2 VALUE-03C
    COMMENT-;MSB shifted into carry, if still 0 continue shifting
    ADDRESS-03A
      LABEL-
  FORMATTED-SL0 sE
  LOGFORMAT-SL0 sE
INSTRUCTION-SL0
   OPERAND1-sE
  OP1 VALUE-sE
   OPERAND2-
  OP2 VALUE-
    COMMENT-;shift a 0 in sE to reduce volume by one
    ADDRESS-03B
      LABEL-
  FORMATTED-JUMP NZ, shift_left
  LOGFORMAT-JUMP NZ, shift_left[038]
INSTRUCTION-JUMP
   OPERAND1-NZ
  OP1 VALUE-NZ
   OPERAND2-shift_left
  OP2 VALUE-038
    COMMENT-;Repeat while volume is larger than 0.
    ADDRESS-03C
      LABEL-output_sum
  FORMATTED-OUTPUT sE, LED_accumulator_port
  LOGFORMAT-OUTPUT sE, LED_accumulator_port[40]
INSTRUCTION-OUTPUT
   OPERAND1-sE
  OP1 VALUE-sE
   OPERAND2-LED_accumulator_port
  OP2 VALUE-40
    COMMENT-;if overflow(256 samples), output
    ADDRESS-03D
      LABEL-
  FORMATTED-LOAD sC, 00
  LOGFORMAT-LOAD sC, 00
INSTRUCTION-LOAD
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-;Reset accumulator to 0.
    ADDRESS-03E
      LABEL-
  FORMATTED-LOAD sD, 00
  LOGFORMAT-LOAD sD, 00
INSTRUCTION-LOAD
   OPERAND1-sD
  OP1 VALUE-sD
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-03F
      LABEL-accumulator_add
  FORMATTED-INPUT sE, DATA_IN_PORT
  LOGFORMAT-INPUT sE, DATA_IN_PORT[00]
INSTRUCTION-INPUT
   OPERAND1-sE
  OP1 VALUE-sE
   OPERAND2-DATA_IN_PORT
  OP2 VALUE-00
    COMMENT-;Load data in
    ADDRESS-040
      LABEL-
  FORMATTED-TEST sE, 80
  LOGFORMAT-TEST sE, 80
INSTRUCTION-TEST
   OPERAND1-sE
  OP1 VALUE-sE
   OPERAND2-80
  OP2 VALUE-80
    COMMENT-;check if negative
    ADDRESS-041
      LABEL-
  FORMATTED-JUMP Z, pos_add
  LOGFORMAT-JUMP Z, pos_add[044]
INSTRUCTION-JUMP
   OPERAND1-Z
  OP1 VALUE-Z
   OPERAND2-pos_add
  OP2 VALUE-044
    COMMENT-;Take the absolute value
    ADDRESS-042
      LABEL-
  FORMATTED-SUB sE, 01
  LOGFORMAT-SUB sE, 01
INSTRUCTION-SUB
   OPERAND1-sE
  OP1 VALUE-sE
   OPERAND2-01
  OP2 VALUE-01
    COMMENT-;Negate if negative
    ADDRESS-043
      LABEL-
  FORMATTED-XOR sE, FF
  LOGFORMAT-XOR sE, FF
INSTRUCTION-XOR
   OPERAND1-sE
  OP1 VALUE-sE
   OPERAND2-FF
  OP2 VALUE-FF
    COMMENT-
    ADDRESS-044
      LABEL-pos_add
  FORMATTED-ADD sC, sE
  LOGFORMAT-ADD sC, sE
INSTRUCTION-ADD
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-sE
  OP2 VALUE-sE
    COMMENT-;Add new value to the sum
    ADDRESS-045
      LABEL-
  FORMATTED-ADDCY sD, 00
  LOGFORMAT-ADDCY sD, 00
INSTRUCTION-ADDCY
   OPERAND1-sD
  OP1 VALUE-sD
   OPERAND2-00
  OP2 VALUE-00
    COMMENT-
    ADDRESS-046
      LABEL-end_isr
  FORMATTED-STORE sB, COUNTER_256
  LOGFORMAT-STORE sB, COUNTER_256[05]
INSTRUCTION-STORE
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-COUNTER_256
  OP2 VALUE-05
    COMMENT-;Save counter and accumulator
    ADDRESS-047
      LABEL-
  FORMATTED-STORE sC, SUM0
  LOGFORMAT-STORE sC, SUM0[06]
INSTRUCTION-STORE
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-SUM0
  OP2 VALUE-06
    COMMENT-
    ADDRESS-048
      LABEL-
  FORMATTED-STORE sD, SUM1
  LOGFORMAT-STORE sD, SUM1[07]
INSTRUCTION-STORE
   OPERAND1-sD
  OP1 VALUE-sD
   OPERAND2-SUM1
  OP2 VALUE-07
    COMMENT-
    ADDRESS-049
      LABEL-
  FORMATTED-FETCH sB, ISR_preserve_sB
  LOGFORMAT-FETCH sB, ISR_preserve_sB[00]
INSTRUCTION-FETCH
   OPERAND1-sB
  OP1 VALUE-sB
   OPERAND2-ISR_preserve_sB
  OP2 VALUE-00
    COMMENT-;restore registers
    ADDRESS-04A
      LABEL-
  FORMATTED-FETCH sC, ISR_preserve_sC
  LOGFORMAT-FETCH sC, ISR_preserve_sC[01]
INSTRUCTION-FETCH
   OPERAND1-sC
  OP1 VALUE-sC
   OPERAND2-ISR_preserve_sC
  OP2 VALUE-01
    COMMENT-
    ADDRESS-04B
      LABEL-
  FORMATTED-FETCH sD, ISR_preserve_sD
  LOGFORMAT-FETCH sD, ISR_preserve_sD[02]
INSTRUCTION-FETCH
   OPERAND1-sD
  OP1 VALUE-sD
   OPERAND2-ISR_preserve_sD
  OP2 VALUE-02
    COMMENT-
    ADDRESS-04C
      LABEL-
  FORMATTED-FETCH sE, ISR_preserve_sE
  LOGFORMAT-FETCH sE, ISR_preserve_sE[03]
INSTRUCTION-FETCH
   OPERAND1-sE
  OP1 VALUE-sE
   OPERAND2-ISR_preserve_sE
  OP2 VALUE-03
    COMMENT-
    ADDRESS-04D
      LABEL-
  FORMATTED-RETURNI ENABLE
  LOGFORMAT-RETURNI ENABLE
INSTRUCTION-RETURNI
   OPERAND1-ENABLE
  OP1 VALUE-ENABLE
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-04E
      LABEL-
  FORMATTED-
  LOGFORMAT-
INSTRUCTION-
   OPERAND1-
  OP1 VALUE-
   OPERAND2-
  OP2 VALUE-
    COMMENT-;Interrupt Vector
    ADDRESS-3FF
      LABEL-
  FORMATTED-ADDRESS 3FF
  LOGFORMAT-ADDRESS 3FF
INSTRUCTION-ADDRESS
   OPERAND1-3FF
  OP1 VALUE-3FF
   OPERAND2-
  OP2 VALUE-
    COMMENT-
    ADDRESS-3FF
      LABEL-
  FORMATTED-JUMP ISR
  LOGFORMAT-JUMP ISR[02E]
INSTRUCTION-JUMP
   OPERAND1-ISR
  OP1 VALUE-02E
   OPERAND2-
  OP2 VALUE-
    COMMENT-
